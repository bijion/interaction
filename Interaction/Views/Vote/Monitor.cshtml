@{
    ViewBag.Title = "投票数据统计";
}

<h2>@ViewBag.Title</h2>

<div>
    <form class="form-horizontal" role="form" action="QueryTrigger" method="get">
        <div class="form-group">
            <label for="query" class="col-sm-2 control-label">ID : </label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="tid" name="tid"
                       placeholder="请输入待查询话题的ID">
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary">提交</button>
            </div>
        </div>
    </form>
</div>

@if (ViewBag.HasResult)
{
    <div>
        <h3>@ViewBag.TopicId</h3>
        <table class="table" style="font-family:'Microsoft YaHei';">
            <tr class="success">
                <td>社交网络</td>
                <td>分享数</td>
            </tr>
            @foreach (var pair in ViewBag.SourceMap)
            {
                <tr>
                    <td>@pair.Key</td>
                    <td>@pair.Value</td>
                </tr>
            }
            <tr class="warning">
                <td>总计</td>
                <td>@ViewBag.TotalShareCount</td>
            </tr>
        </table>
    </div>
}
else
{
    <div>
        <p class="bg-warning">没有找到任何投票！</p>
    </div>
}

<div>
    <p>
        <a class="btn btn-default" href="/Vote/Create">创建</a>
        <a class="btn btn-default" href="/Vote/List">列表</a>
        <a class="btn btn-primary" href="/Vote/QueryTrigger?tid=@ViewBag.TopicId">查询</a>
    </p>
</div>
